(this["webpackJsonpbumblebee-full-example"]=this["webpackJsonpbumblebee-full-example"]||[]).push([[0],{11:function(e,t,s){},32:function(e,t,s){"use strict";s.r(t);var o=s(1),n=s(6),i=s.n(n),r=(s(11),s(3)),a=s.n(r),c=s(4),d=s.n(c),h=s(0);const l=new d.a,u="computer";l.setWorkersPath("./bumblebee-workers"),l.addHotword(u),a.a.setWorkers({espeak:"webworkers/espeak-en-worker.js"});var b=new a.a({language:"en",profile:"Jack"});class p extends o.Component{constructor(){super(),this.state={hotwords:Object.keys(l.hotwords),bumblebee_started:!1,spokenHotwords:[],selectedHotword:u,sensivitiyChanged:!1,sensitivity:.9,action:"sounds",muted:!1,microphones:[],microphone:"default"},this.sounds={porcupine:new Audio("sounds/nova_hey.mp3"),computer:new Audio("sounds/blip.mp3")},l.on("hotword",(e=>{this.recognizeHotword(e),window.callback&&window.callback()})),l.on("data",((e,t,s,o)=>{}))}componentDidMount(){l.setHotword(this.state.selectedHotword),l.on("analyser",(e=>{console.log("analyser",e);var t=document.getElementById("oscilloscope");this.analyser=new c.SpectrumAnalyser(e,t),this.state.muted&&(l.setMuted(!0),this.analyser.setMuted(!0)),this.analyser.start()})),l.getMicrophones().then((e=>{this.setState({microphones:e})})).catch(console)}render(){return Object(h.jsxs)("div",{className:"App",children:["Microphone: ",Object(h.jsx)("select",{value:this.state.microphone,onChange:e=>this.changeMicrophone(e),children:this.renderMicrophones()}),Object(h.jsx)("br",{}),"Hotword: ",Object(h.jsx)("select",{value:this.state.selectedHotword||"",onChange:e=>this.changeHotword(e),children:this.renderHotwordOptions()}),Object(h.jsx)("br",{}),"Sensitivity: ",Object(h.jsx)("select",{value:this.state.sensitivity||"",onChange:e=>this.changeSensitivity(e),children:this.renderSensitivities()}),Object(h.jsx)("br",{}),"Action: ",Object(h.jsxs)("select",{value:this.state.action||"",onChange:e=>this.changeAction(e),children:[Object(h.jsx)("option",{value:"sounds",children:"Sounds"}),Object(h.jsx)("option",{value:"texttospeech",children:"Speech To Text"})]}),Object(h.jsx)("br",{}),Object(h.jsx)("button",{id:"button",onClick:e=>this.toggleHotword(),children:this.state.bumblebee_started?"Stop":"Start"}),Object(h.jsx)("button",{onClick:e=>this.toggleMuted(),children:this.state.muted?"Unmute":"Mute"}),Object(h.jsx)("br",{}),Object(h.jsx)("canvas",{id:"oscilloscope",width:"800",height:"100"}),this.renderSay(),this.renderBumblebees()]})}renderSay(){if(this.state.bumblebee_started)return this.state.selectedHotword?Object(h.jsxs)("h3",{children:['Say "',this.state.selectedHotword,'":']}):Object(h.jsxs)("h4",{children:["Say any of the following: ",this.state.hotwords.join(", "),":"]})}renderMicrophones(){return this.state.microphones.map(((e,t)=>Object(h.jsx)("option",{value:e.id,children:e.name},t)))}renderHotwordOptions(){let e=this.state.hotwords.map(((e,t)=>Object(h.jsx)("option",{value:e,children:e},t)));return e.unshift(Object(h.jsx)("option",{value:"",children:"* Any *"},"null")),e}renderSensitivities(e){let t=[];for(let s=0;s<=10;s++){let e=s/10,o=10*s;t.push(Object(h.jsxs)("option",{value:e,children:[o,"%"]},s))}return t}changeAction(e){let t=e.target.options[e.target.selectedIndex].value;this.setState({action:t})}changeSensitivity(e){let t=e.target.options[e.target.selectedIndex].value;this.state.sensivitiyChanged?alert("Sensitivity can only be set before .start(), reload and try again"):(this.setState({sensitivity:t}),l.setSensitivity(t))}changeMicrophone(e){let t=e.target.options[e.target.selectedIndex].value;this.stop(),this.setState({microphone:t},(()=>{l.setMicrophone(t),this.start()}))}changeHotword(e){let t=e.target.options[e.target.selectedIndex].value;l.setHotword(t),this.setState({selectedHotword:t,spokenHotwords:[]})}toggleHotword(){this.state.bumblebee_started?this.stop():this.start()}start(){let e=this.state.selectedHotword;console.log("starting",e),this.setState({bumblebee_started:!0,spokenHotwords:[],sensivitiyChanged:!0}),l.start()}stop(){l.stop(),this.setState({bumblebee_started:!1,spokenHotwords:[]})}toggleMuted(){const e=!this.state.muted;this.setState({muted:e},(()=>{l.setMuted(e),this.analyser&&this.analyser.setMuted(e)}))}recognizeHotword(e){if(e!==this.state.selectedHotword&&this.state.selectedHotword)console.log("did not recognize",e);else{"sounds"===this.state.action?this.sounds[e]&&this.sounds[e].play():"texttospeech"===this.state.action&&b.say(e+"detected");const t=this.state.spokenHotwords;t.push(e),console.log("recognized hotword",e),this.setState({spokenHotwords:t})}}renderBumblebees(){let e=this.state.spokenHotwords.map(((e,t)=>Object(h.jsx)("li",{children:e},t)));return Object(h.jsx)("ul",{children:e})}}var w=p;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(h.jsx)(w,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()}))}},[[32,1,2]]]);
//# sourceMappingURL=main.aee8d36f.chunk.js.map